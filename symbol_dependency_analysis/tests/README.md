# æµ‹è¯•å¥—ä»¶

è¿™ä¸ªç›®å½•åŒ…å«äº†ç¬¦å·ä¾èµ–åˆ†æå™¨çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œæ¶µç›–äº†å„ç§Cä»£ç ç¬¦å·ä¾èµ–å…³ç³»çš„æµ‹è¯•åœºæ™¯ã€‚æ‰€æœ‰æµ‹è¯•ä½¿ç”¨assertæ–­è¨€è¿›è¡Œè‡ªåŠ¨åŒ–éªŒè¯ã€‚

## æµ‹è¯•æ–‡ä»¶è¯´æ˜

### åŸºç¡€æµ‹è¯•
- `test_symbols.py` - æµ‹è¯•ç¬¦å·æ³¨å†Œè¡¨çš„åŸºæœ¬åŠŸèƒ½ï¼Œä½¿ç”¨assertéªŒè¯ç¬¦å·å­˜åœ¨æ€§
- `test_binn_dependencies.py` - æµ‹è¯•binn_create_typeå‡½æ•°çš„ä¾èµ–æå–ï¼ˆæ ¸å¿ƒéªŒè¯ï¼‰ï¼Œä¸¥æ ¼æ–­è¨€æœŸæœ›ä¾èµ–

### ä¸“é¡¹æµ‹è¯•
- `test_macro_dependencies.py` - æµ‹è¯•å®å®šä¹‰å’Œå®ä½¿ç”¨çš„ä¾èµ–å…³ç³»è¯†åˆ«
- `test_type_dependencies.py` - æµ‹è¯•ç»“æ„ä½“ã€ç±»å‹å®šä¹‰ã€æšä¸¾çš„ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨assertéªŒè¯åˆ†æç»“æœ
- `test_function_dependencies.py` - æµ‹è¯•å‡½æ•°è°ƒç”¨ä¾èµ–ï¼ŒåŒ…æ‹¬é€’å½’è°ƒç”¨å’Œè·¨æ–‡ä»¶è°ƒç”¨ï¼Œä½¿ç”¨assertéªŒè¯ç»Ÿè®¡ç»“æœ
- `test_scope_analysis.py` - æµ‹è¯•ä½œç”¨åŸŸåˆ†æå’Œå±€éƒ¨å˜é‡è¿‡æ»¤åŠŸèƒ½ï¼ˆä¸¥æ ¼æ–­è¨€è¿‡æ»¤æ­£ç¡®æ€§ï¼‰

### æµ‹è¯•è¿è¡Œå™¨
- `test_runner.py` - ç»Ÿä¸€çš„æµ‹è¯•è¿è¡Œå™¨ï¼Œæ”¯æŒasserté”™è¯¯å¤„ç†å’Œæµ‹è¯•ç»“æœç»Ÿè®¡

## è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
cd tests
python3 test_runner.py
```

### è¿è¡Œå¿«é€Ÿæµ‹è¯•
```bash
python3 test_runner.py --quick
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
python3 test_runner.py --test test_binn_dependencies
```

### å•ç‹¬è¿è¡Œæµ‹è¯•æ–‡ä»¶
```bash
python3 test_macro_dependencies.py
python3 test_type_dependencies.py
python3 test_function_dependencies.py
python3 test_scope_analysis.py
```

## Assertæ–­è¨€éªŒè¯

### æ ¸å¿ƒæ–­è¨€
- âœ… **ç¬¦å·å­˜åœ¨æ€§**: éªŒè¯æœŸæœ›çš„ç¬¦å·åœ¨æ³¨å†Œè¡¨ä¸­å­˜åœ¨
- âœ… **ä¾èµ–å…³ç³»**: éªŒè¯å…·ä½“çš„ä¾èµ–å…³ç³»è¢«æ­£ç¡®è¯†åˆ«
- âœ… **è¿‡æ»¤æ­£ç¡®æ€§**: ä¸¥æ ¼éªŒè¯å±€éƒ¨å˜é‡å’Œå‚æ•°ä¸è¢«è¯¯è¯†åˆ«ä¸ºä¾èµ–
- âœ… **ç±»å‹å‡†ç¡®æ€§**: éªŒè¯ç¬¦å·ç±»å‹åˆ†ç±»æ­£ç¡®

### å¤±è´¥å¤„ç†
æµ‹è¯•ä½¿ç”¨assertè¿›è¡ŒéªŒè¯ï¼Œå¤±è´¥æ—¶ä¼šï¼š
- æ˜¾ç¤ºå…·ä½“çš„æ–­è¨€é”™è¯¯ä¿¡æ¯
- ç»§ç»­è¿è¡Œå…¶ä»–æµ‹è¯•
- æœ€ç»ˆæ˜¾ç¤ºé€šè¿‡/å¤±è´¥ç»Ÿè®¡

## æµ‹è¯•è¦†ç›–çš„åœºæ™¯

### å®ä¾èµ–æµ‹è¯•
- âœ… å®å®šä¹‰ä¸­å¼•ç”¨å…¶ä»–å®
- âœ… æ¡ä»¶ç¼–è¯‘å®çš„è¯†åˆ«
- âœ… å‡½æ•°ä¸­å®çš„ä½¿ç”¨æ£€æµ‹
- âœ… å®å‘½åæ¨¡å¼çš„å¯å‘å¼è¯†åˆ«

### ç±»å‹ä¾èµ–æµ‹è¯•
- âœ… ç»“æ„ä½“å®šä¹‰ä¸­çš„ç±»å‹å¼•ç”¨
- âœ… typedefå®šä¹‰çš„ä¾èµ–å…³ç³»
- âœ… å‡½æ•°ä¸­è‡ªå®šä¹‰ç±»å‹çš„ä½¿ç”¨
- âœ… æšä¸¾å®šä¹‰å’Œä½¿ç”¨

### å‡½æ•°ä¾èµ–æµ‹è¯•
- âœ… å‡½æ•°è°ƒç”¨ä¾èµ–è¯†åˆ«
- âœ… é€’å½’å‡½æ•°è°ƒç”¨æ£€æµ‹
- âœ… è·¨æ–‡ä»¶å‡½æ•°è°ƒç”¨åˆ†æ
- âœ… å¤æ‚å‡½æ•°çš„å¤šç±»å‹ä¾èµ–

### ä½œç”¨åŸŸåˆ†ææµ‹è¯•ï¼ˆä¸¥æ ¼æ–­è¨€ï¼‰
- ğŸ”’ **å±€éƒ¨å˜é‡è¿‡æ»¤**: assertç¡®ä¿å±€éƒ¨å˜é‡ä¸è¢«è¯¯è¯†åˆ«
- ğŸ”’ **å‡½æ•°å‚æ•°è¿‡æ»¤**: assertç¡®ä¿å‚æ•°ä¸è¢«è¯¯è¯†åˆ«
- ğŸ”’ **ç¬¦å·ä½œç”¨åŸŸå‡†ç¡®æ€§**: ä¸¥æ ¼éªŒè¯ä½œç”¨åŸŸè¾¹ç•Œ

## åŸºäºçš„æµ‹è¯•æ•°æ®

æµ‹è¯•ç”¨ä¾‹åŸºäºä»¥ä¸‹Cé¡¹ç›®æ–‡ä»¶ï¼š
- `benchmarks/crown/Input/src/binn.c` - ä¸»è¦çš„Cå®ç°æ–‡ä»¶
- `benchmarks/crown/Input/src/binn.h` - å¤´æ–‡ä»¶å®šä¹‰
- `benchmarks/crown/Input/test/test-binn.c` - æµ‹è¯•æ–‡ä»¶

è¿™äº›æ–‡ä»¶åŒ…å«äº†ä¸°å¯Œçš„Cè¯­è¨€ç‰¹æ€§ï¼š
- å®å®šä¹‰å’Œæ¡ä»¶ç¼–è¯‘
- ç»“æ„ä½“å’Œç±»å‹å®šä¹‰
- å‡½æ•°è°ƒç”¨å’Œé€’å½’
- è·¨æ–‡ä»¶ä¾èµ–å…³ç³»
- å¤æ‚çš„ä½œç”¨åŸŸç»“æ„

## æ ¸å¿ƒéªŒè¯ï¼ˆAssertä¿è¯ï¼‰

### binn_create_typeå‡½æ•°ä¾èµ–éªŒè¯
```python
# è¿™äº›ä¾èµ–å¿…é¡»è¢«æ­£ç¡®è¯†åˆ«
assert 'APIENTRY' in found_dependencies
assert 'BINN_STORAGE_MIN' in found_dependencies  
assert 'BINN_STORAGE_MAX' in found_dependencies
assert 'BINN_STORAGE_HAS_MORE' in found_dependencies

# è¿™äº›å±€éƒ¨ç¬¦å·ä¸èƒ½è¢«è¯¯è¯†åˆ«
assert 'storage_type' not in found_dependencies    # å‡½æ•°å‚æ•°
assert 'data_type_index' not in found_dependencies # å‡½æ•°å‚æ•°
```

### ä½œç”¨åŸŸè¿‡æ»¤éªŒè¯
```python
# ä¸¥æ ¼éªŒè¯ï¼šå±€éƒ¨å˜é‡ä¸èƒ½è¢«è¯†åˆ«ä¸ºä¾èµ–
assert len(false_positives) == 0, f"å±€éƒ¨å˜é‡è¢«è¯¯è¯†åˆ«: {false_positives}"

# ä¸¥æ ¼éªŒè¯ï¼šå‡½æ•°å‚æ•°ä¸èƒ½è¢«è¯†åˆ«ä¸ºä¾èµ–  
assert len(param_false_positives) == 0, f"å‚æ•°è¢«è¯¯è¯†åˆ«: {param_false_positives}"
```

## æµ‹è¯•ç»“æœç¤ºä¾‹

```
ğŸ§ª å¼€å§‹è¿è¡Œç¬¦å·ä¾èµ–åˆ†æå™¨æµ‹è¯•å¥—ä»¶
============================================================
âœ… é€šè¿‡: 6
âŒ å¤±è´¥: 0  
ğŸ“Š æˆåŠŸç‡: 100.0%
â±ï¸  æ€»è€—æ—¶: 2.45s
```
